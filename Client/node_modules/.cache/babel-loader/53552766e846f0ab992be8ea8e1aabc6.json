{"ast":null,"code":"import _slicedToArray from\"/Users/rhysconnolly/Desktop/MusicOwnersipApplication/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import styles from'./CSS Modules/FileInputButtons-style.module.css';import ContractInteraction from'./ContractInteraction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PROJECT_ID='1z2zKzXJSnmfHxjLo8APH4Ljxhl';var PROJECT_SECRET='796b649fad2aac594c4767a8abcd7be4';function UploadMetadata(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFilePicked=_useState4[0],setIsFilePicked=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isFileSubmited=_useState6[0],setFileIsSubmitted=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),showCID=_useState8[0],setShowCID=_useState8[1];var changeHandler=function changeHandler(event){setSelectedFile(event.target.files[0]);setIsFilePicked(true);};var handleSubmission=function handleSubmission(){var formData=new FormData();formData.append('Submitted File',selectedFile);var xhr=new XMLHttpRequest();xhr.open(\"POST\",\"https://ipfs.infura.io:5001/api/v0/add\");xhr.setRequestHeader(\"Authorization\",\"Basic \"+btoa(PROJECT_ID+\":\"+PROJECT_SECRET));xhr.send(formData);xhr.onload=function(){var Cid=JSON.parse(\"\".concat(xhr.response));setShowCID(Cid.Hash);if(Cid.Hash!=null){setFileIsSubmitted(true);}};};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.componentheaders,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.componentspacing,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"2. Upload Your Metadata JSON file: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",name:\"file\",onChange:changeHandler}),isFilePicked?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Filename: \",selectedFile.name]})}):/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSubmission();},children:\"Submit\"}),isFileSubmited?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"SUCCESFULLY UPLOADED\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"You can view File at:\"}),/*#__PURE__*/_jsxs(\"h5\",{children:[\" \",'https://ipfs.io/ipfs/'+showCID]})]}):/*#__PURE__*/_jsx(\"p\",{className:styles.uploadFile})]})]})}),/*#__PURE__*/_jsx(ContractInteraction,{showCIDs:showCID})]})});}export default UploadMetadata;","map":{"version":3,"sources":["/Users/rhysconnolly/Desktop/MusicOwnersipApplication/client/src/components/UploadMetadata.js"],"names":["React","useState","styles","ContractInteraction","PROJECT_ID","PROJECT_SECRET","UploadMetadata","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","isFileSubmited","setFileIsSubmitted","showCID","setShowCID","changeHandler","event","target","files","handleSubmission","formData","FormData","append","xhr","XMLHttpRequest","open","setRequestHeader","btoa","send","onload","Cid","JSON","parse","response","Hash","componentheaders","componentspacing","name","uploadFile"],"mappings":"8IAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,iDAAnB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,uBAAhC,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,6BAAnB,CACA,GAAMC,CAAAA,cAAc,CAAG,kCAAvB,CAEA,QAASC,CAAAA,cAAT,EAA0B,CACxB,cAAwCL,QAAQ,EAAhD,wCAAOM,YAAP,eAAqBC,eAArB,eACA,eAAwCP,QAAQ,CAAC,KAAD,CAAhD,yCAAOQ,YAAP,eAAqBC,eAArB,eACA,eAA6CT,QAAQ,CAAC,KAAD,CAArD,yCAAOU,cAAP,eAAuBC,kBAAvB,eACA,eAA8BX,QAAQ,CAAC,IAAD,CAAtC,yCAAOY,OAAP,eAAgBC,UAAhB,eAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CACjCR,eAAe,CAACQ,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAf,CACER,eAAe,CAAC,IAAD,CAAf,CACD,CAHD,CAKA,GAAMS,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC/B,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,gBAAhB,CAAkCf,YAAlC,EAEE,GAAMgB,CAAAA,GAAG,CAAG,GAAIC,CAAAA,cAAJ,EAAZ,CAEAD,GAAG,CAACE,IAAJ,CACE,MADF,CAEE,wCAFF,EAKAF,GAAG,CAACG,gBAAJ,CACE,eADF,CAEE,SAAWC,IAAI,CAACvB,UAAU,CAAG,GAAb,CAAmBC,cAApB,CAFjB,EAKAkB,GAAG,CAACK,IAAJ,CAASR,QAAT,EAEAG,GAAG,CAACM,MAAJ,CAAa,UAAM,CACnB,GAAIC,CAAAA,GAAG,CAAGC,IAAI,CAACC,KAAL,WAAcT,GAAG,CAACU,QAAlB,EAAV,CACAnB,UAAU,CAACgB,GAAG,CAACI,IAAL,CAAV,CACA,GAAIJ,GAAG,CAACI,IAAJ,EAAY,IAAhB,CACE,CACAtB,kBAAkB,CAAC,IAAD,CAAlB,CACC,CACF,CAPD,CAQD,CA1BD,CA4BA,mBACE,KAAC,KAAD,CAAO,QAAP,wBACE,oCACE,YAAK,SAAS,CAAIV,MAAM,CAACiC,gBAAzB,uBACE,aAAK,SAAS,CAAIjC,MAAM,CAACkC,gBAAzB,wBACA,2DADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,MAAM,CAAC,OAA1B,CAAkC,IAAI,CAAC,MAAvC,CAA8C,QAAQ,CAAGrB,aAAzD,EAFA,CAGCN,YAAY,cACZ,kCACH,mCAAeF,YAAY,CAAC8B,IAA5B,GADG,EADY,cAIN,YAPP,cAQE,aARF,cASE,oCACE,eAAQ,OAAO,CAAG,yBAAMlB,CAAAA,gBAAgB,EAAtB,EAAlB,oBADF,CAEGR,cAAc,cACb,oCACC,4CADD,cAEE,6CAFF,cAGH,0BAAM,wBAA0BE,OAAhC,GAHG,GADa,cAOf,UAAG,SAAS,CAAEX,MAAM,CAACoC,UAArB,EATF,GATF,GADF,EADF,cA0BA,KAAC,mBAAD,EAAqB,QAAQ,CAAIzB,OAAjC,EA1BA,GADF,EADF,CAgCD,CACD,cAAeP,CAAAA,cAAf","sourcesContent":["import React, {useState} from 'react'\nimport styles from './CSS Modules/FileInputButtons-style.module.css';\nimport ContractInteraction from './ContractInteraction';\n\nconst PROJECT_ID = '1z2zKzXJSnmfHxjLo8APH4Ljxhl';\nconst PROJECT_SECRET = '796b649fad2aac594c4767a8abcd7be4';\n\nfunction UploadMetadata() {\n  const [selectedFile, setSelectedFile] = useState();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n  const [isFileSubmited, setFileIsSubmitted] = useState(false);\n  const [showCID, setShowCID] = useState(null);\n      \n\n  const changeHandler = (event) => {\n\t\tsetSelectedFile(event.target.files[0]);\n    setIsFilePicked(true);\n  };\n     \n  const handleSubmission = () => {\n\t\tconst formData = new FormData();\n\t\tformData.append('Submitted File', selectedFile);\n    \n    const xhr = new XMLHttpRequest();\n    \n    xhr.open(\n      \"POST\",\n      \"https://ipfs.infura.io:5001/api/v0/add\"\n    );\n    \n    xhr.setRequestHeader(\n      \"Authorization\", \n      \"Basic \" + btoa(PROJECT_ID + \":\" + PROJECT_SECRET)\n    );\n    \n    xhr.send(formData);\n    \n    xhr.onload = () => {\n    var Cid = JSON.parse(`${xhr.response}`);\n    setShowCID(Cid.Hash);\n    if (Cid.Hash != null)\n      {\n      setFileIsSubmitted(true);\n      }\n    }  \n  }\n\n  return (\n    <React.Fragment>\n      <div>\n        <div className = {styles.componentheaders}>\n          <div className = {styles.componentspacing}>\n          <h2 >2. Upload Your Metadata JSON file: </h2>\n          <input type=\"file\" accept=\".json\" name=\"file\" onChange= {changeHandler} />\n          {isFilePicked ? (\n           <div>\n\t\t\t\t\t   <h5>Filename: {selectedFile.name}</h5>\n            </div>\n            ) : (<p></p>)}\n            <br/>\n            <div>\n              <button onClick= {() => handleSubmission() }>Submit</button> \n              {isFileSubmited ? (\n                <div>\n                 <h5>SUCCESFULLY UPLOADED</h5>\n                  <h5>You can view File at:</h5>\n\t\t\t\t\t        <h5> {'https://ipfs.io/ipfs/' + showCID}</h5>\n                </div> \n                ) : (\n              <p className={styles.uploadFile}></p>\n                )\n              }\n            </div>\n          </div>\n        </div>\n      <ContractInteraction showCIDs = {showCID} /> \n    </div>\n  </React.Fragment> \n  );\n}\nexport default UploadMetadata "]},"metadata":{},"sourceType":"module"}