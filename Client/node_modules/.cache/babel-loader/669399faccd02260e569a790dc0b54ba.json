{"ast":null,"code":"var _jsxFileName = \"/Users/rhysconnolly/SKEEEEET/client/src/components/ContractInteraction.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport MusicOwnership from '../artifacts/MusicOwnership.json';\nimport Web3 from 'web3';\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport styles from './CSS Modules/FileInputButtons-style.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ContractInteraction(props) {\n  _s();\n\n  ///////Webpage State components///////\n  const [accounts, setAccounts] = useState([]); //state variable for accounts\n\n  const [web3, setWeb3] = useState(undefined); //web3 state\n\n  const [contract, setContract] = useState(undefined); //contract state\n\n  const [uri, setUri] = useState(undefined); //Uri code State\n\n  const [tokenID, setTokenID] = useState(undefined); //Token ID state\n\n  const [tokenExists, setTokenExists] = useState(false); //Triggers Token UI response on and off\n\n  const [reciever, setReciever] = useState(undefined);\n  const [url, setUrl] = useState(undefined); //Metadata URL state\n\n  const [doesntExist, setDoesntExist] = useState(undefined); //switch for Token ID response\n\n  const [connectionStatus, setConnectionStatus] = useState(false);\n  const [owner, setOwner] = useState(undefined);\n  const [transactionStatus, setTransactionStatus] = useState(false); ///////Function for submitting a token Id////////\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n    console.log(props.showCIDs);\n    console.log(tokenID);\n    RetrieveTokenURL(tokenID);\n  };\n\n  const handleChange = e => {\n    setTokenID(e.target.value);\n  }; //Initialise state variables and connect to Smart Contract//\n\n\n  async function init() {\n    try {\n      const uri = await props.CIDkey;\n      const tokenID = await props.tokenIDs;\n      const web3 = await new Web3(window.ethereum);\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = MusicOwnership.networks[networkId];\n      const contract = await new web3.eth.Contract(MusicOwnership.abi, deployedNetwork && deployedNetwork.address);\n      console.log(contract);\n      await setUri(uri);\n      await setWeb3(web3);\n      await setAccounts(accounts);\n      await setContract(contract);\n      console.log(tokenID);\n      console.log(uri);\n    } catch (error) {\n      alert(`Failed to load web3, accounts or contract from the abi. Check console For details.`);\n      console.error(error);\n    }\n  } ///////Configure wallet and connect to Metamask///////\n\n\n  async function configureAndConnectMetamask() {\n    const provider = await detectEthereumProvider({\n      mustBeMetaMask: true\n    });\n\n    if (provider) {\n      try {\n        await provider.request({\n          method: 'eth_requestAccounts'\n        });\n        await provider.request({\n          method: 'wallet_addEthereumChain',\n          params: [{\n            chainId: '0x3',\n            chainName: 'Ropsten',\n            nativeCurrency: {\n              name: 'ETH',\n              symbol: 'ETH',\n              decimals: 18\n            },\n            rpcUrls: ['https://ropsten.infura.io/v3/b3b18fff97b6463ca552f9334d7fe15f'],\n            blockExplorerUrls: ['https://ropsten.etherscan.io']\n          }]\n        });\n      } catch (e) {\n        console.error(e);\n        setConnectionStatus(true);\n      }\n    } else {\n      console.error('Please install MetaMask');\n      alert('Please install the MetaMask wallet extension in Chrome or Brave Browser');\n    }\n\n    await init();\n  } ////////////Mint a new Token////////////\n\n\n  async function Mint() {\n    if (uri === undefined || tokenID === undefined) {\n      alert('please ensure a file first and that you have entered a numerical Identification number');\n      throw 'please ensure a file is submitted first and that you have entered a numerical Identification number';\n    }\n\n    let checkID = await contract.methods.tokenURI(tokenID).call();\n\n    if (checkID = !null) {\n      alert('This ID number has been taken, please try a different number');\n      throw 'This ID number has been taken, please try a different number';\n    }\n\n    await contract.methods.mint(accounts[0], uri, tokenID).send({\n      from: accounts[0],\n      gas: 1000000\n    });\n  }\n\n  if (typeof web3 !== 'undefined' && typeof accounts !== 'undefined' && typeof contract !== 'undefined') {} /////////Retrieve a Token's Metadata and source File/////////\n\n\n  async function RetrieveTokenURL() {\n    if (tokenID === undefined) {\n      alert('please enter a numerical Identification number');\n      throw 'please enter a numerical Identification number';\n    }\n\n    try {\n      const url = await contract.methods.tokenURI(tokenID).call();\n      setUrl(url);\n      console.log(JSON.stringify(url));\n      const owner = await contract.methods.ownerOf(tokenID).call();\n      setOwner(owner);\n      setTokenExists(true);\n    } catch (error) {\n      setDoesntExist('This Token ID does not exit');\n      setTokenExists(false);\n    }\n  }\n\n  const handleRecieverSubmit = evt => {\n    evt.preventDefault();\n    alert(`Submitting ID: ${reciever}`);\n    setReciever(reciever);\n  };\n\n  const handleRecieverChange = e => {\n    setReciever(e.target.value);\n  };\n\n  async function TransferToken() {\n    console.log(reciever);\n    console.log(tokenID);\n    console.log(accounts[0]);\n\n    if ({\n      reciever\n    } == null || {\n      tokenID\n    } == null || accounts[0] == null) {\n      alert('Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted');\n      throw 'Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted';\n    }\n\n    try {\n      await contract.methods.transferFrom(accounts[0], reciever, tokenID).send({\n        from: accounts[0],\n        gas: 1000000\n      });\n      console.log(reciever);\n      setTransactionStatus(true);\n    } catch (error) {\n      alert('Transaction failed. \\nPlease ensure the token you wish to transfer exists and that you`re wallet contains the token');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"3. Connect To Your Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => configureAndConnectMetamask(),\n            children: \"Connect to Ropsten \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 8\n        }, this), connectionStatus ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Account:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\" \", accounts[0]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"NotConnected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"4. Enter a TokenID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: tokenID,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.column,\n          children: tokenExists ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"Track \", tokenID, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 11\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: [url, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"Owner of Track \", tokenID, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 9\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: owner\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 11\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: doesntExist\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \" 5. Mint Your Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => Mint(),\n          children: \" Mint Token \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Transfer Ownership\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleRecieverSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: reciever,\n            onChange: handleRecieverChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 9\n        }, this), transactionStatus ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Transaction Was Succesfull\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: TransferToken,\n          children: \"Transfer Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContractInteraction, \"SrFiNnAl/MNXPtHI6amld/LWQsI=\");\n\n_c = ContractInteraction;\nexport default ContractInteraction;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContractInteraction\");","map":{"version":3,"sources":["/Users/rhysconnolly/SKEEEEET/client/src/components/ContractInteraction.js"],"names":["React","useState","MusicOwnership","Web3","detectEthereumProvider","styles","ContractInteraction","props","accounts","setAccounts","web3","setWeb3","undefined","contract","setContract","uri","setUri","tokenID","setTokenID","tokenExists","setTokenExists","reciever","setReciever","url","setUrl","doesntExist","setDoesntExist","connectionStatus","setConnectionStatus","owner","setOwner","transactionStatus","setTransactionStatus","handleSubmit","evt","preventDefault","console","log","showCIDs","RetrieveTokenURL","handleChange","e","target","value","init","CIDkey","tokenIDs","window","ethereum","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","Contract","abi","address","error","alert","configureAndConnectMetamask","provider","mustBeMetaMask","request","method","params","chainId","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","Mint","checkID","methods","tokenURI","call","mint","send","from","gas","JSON","stringify","ownerOf","handleRecieverSubmit","handleRecieverChange","TransferToken","transferFrom","componentheaders","componentspacing","column"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,sBAAP,MAAmC,2BAAnC;AACA,OAAOC,MAAP,MAAmB,iDAAnB;;;AAEE,SAASC,mBAAT,CAA8BC,KAA9B,EAAqC;AAAA;;AAEnC;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC,CAHmC,CAGW;;AAC9C,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAEW,SAAF,CAAhC,CAJmC,CAIW;;AAC9C,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAEW,SAAF,CAAxC,CALmC,CAKmB;;AACtD,QAAM,CAACG,GAAD,EAAMC,MAAN,IAAgBf,QAAQ,CAAEW,SAAF,CAA9B,CANmC,CAMS;;AAC5C,QAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAEW,SAAF,CAAtC,CAPmC,CAOiB;;AACpD,QAAM,CAACO,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAAE,KAAF,CAA9C,CARmC,CAQqB;;AACxD,QAAM,CAACoB,QAAD,EAAUC,WAAV,IAA0BrB,QAAQ,CAAEW,SAAF,CAAxC;AACA,QAAM,CAACW,GAAD,EAAMC,MAAN,IAAgBvB,QAAQ,CAAEW,SAAF,CAA9B,CAVmC,CAUS;;AAC5C,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCzB,QAAQ,CAACW,SAAD,CAA9C,CAXmC,CAWwB;;AAC3D,QAAM,CAACe,gBAAD,EAAmBC,mBAAnB,IAA0C3B,QAAQ,CAAC,KAAD,CAAxD;AACA,QAAM,CAAC4B,KAAD,EAAQC,QAAR,IAAoB7B,QAAQ,CAACW,SAAD,CAAlC;AACA,QAAM,CAACmB,iBAAD,EAAmBC,oBAAnB,IAA2C/B,QAAQ,CAAC,KAAD,CAAzD,CAdmC,CAgBnC;;AACA,QAAMgC,YAAY,GAAIC,GAAD,IAAS;AAC5BA,IAAAA,GAAG,CAACC,cAAJ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY9B,KAAK,CAAC+B,QAAlB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYpB,OAAZ;AACAsB,IAAAA,gBAAgB,CAACtB,OAAD,CAAhB;AACD,GALD;;AAMA,QAAMuB,YAAY,GAAIC,CAAD,IAAO;AAC5BvB,IAAAA,UAAU,CAACuB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV;AACC,GAFD,CAvBmC,CA2BnC;;;AACA,iBAAeC,IAAf,GAAsB;AAEpB,QAAI;AACA,YAAM7B,GAAG,GAAG,MAAOR,KAAK,CAACsC,MAAzB;AACA,YAAM5B,OAAO,GAAG,MAAOV,KAAK,CAACuC,QAA7B;AACA,YAAOpC,IAAI,GAAG,MAAM,IAAIP,IAAJ,CAAS4C,MAAM,CAACC,QAAhB,CAApB;AACA,YAAMxC,QAAQ,GAAG,MAAOE,IAAI,CAACuC,GAAL,CAASC,WAAT,EAAxB;AACA,YAAMC,SAAS,GAAG,MAAMzC,IAAI,CAACuC,GAAL,CAASG,GAAT,CAAaC,KAAb,EAAxB;AACA,YAAMC,eAAe,GAAGpD,cAAc,CAACqD,QAAf,CAAwBJ,SAAxB,CAAxB;AACA,YAAMtC,QAAQ,GAAG,MAAM,IAAIH,IAAI,CAACuC,GAAL,CAASO,QAAb,CACvBtD,cAAc,CAACuD,GADQ,EAEvBH,eAAe,IAAIA,eAAe,CAACI,OAFZ,CAAvB;AAIAtB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,QAAZ;AACA,YAAMG,MAAM,CAACD,GAAD,CAAZ;AACA,YAAMJ,OAAO,CAACD,IAAD,CAAb;AACA,YAAMD,WAAW,CAACD,QAAD,CAAjB;AACA,YAAMM,WAAW,CAACD,QAAD,CAAjB;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAYpB,OAAZ;AACAmB,MAAAA,OAAO,CAACC,GAAR,CAAYtB,GAAZ;AACC,KAlBL,CAoBA,OAAO4C,KAAP,EAAc;AACZC,MAAAA,KAAK,CAAE,oFAAF,CAAL;AACAxB,MAAAA,OAAO,CAACuB,KAAR,CAAcA,KAAd;AACD;AACF,GAtDkC,CAwDnC;;;AAEA,iBAAeE,2BAAf,GAA6C;AAC3C,UAAMC,QAAQ,GAAG,MAAM1D,sBAAsB,CAAC;AAC5C2D,MAAAA,cAAc,EAAE;AAD4B,KAAD,CAA7C;;AAGA,QAAID,QAAJ,EAAc;AACZ,UAAI;AACF,cAAMA,QAAQ,CAACE,OAAT,CAAiB;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAjB,CAAN;AACA,cAAMH,QAAQ,CAACE,OAAT,CAAiB;AACrBC,UAAAA,MAAM,EAAE,yBADa;AAErBC,UAAAA,MAAM,EAAE,CAAC;AACPC,YAAAA,OAAO,EAAE,KADF;AAEPC,YAAAA,SAAS,EAAE,SAFJ;AAGPC,YAAAA,cAAc,EAAE;AACdC,cAAAA,IAAI,EAAE,KADQ;AAEdC,cAAAA,MAAM,EAAE,KAFM;AAGdC,cAAAA,QAAQ,EAAE;AAHI,aAHT;AAQPC,YAAAA,OAAO,EAAE,CAAC,+DAAD,CARF;AASPC,YAAAA,iBAAiB,EAAE,CAAC,8BAAD;AATZ,WAAD;AAFa,SAAjB,CAAN;AAeD,OAjBD,CAiBE,OAAMjC,CAAN,EAAS;AACTL,QAAAA,OAAO,CAACuB,KAAR,CAAclB,CAAd;AACAb,QAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD;AACF,KAtBD,MAsBO;AACLQ,MAAAA,OAAO,CAACuB,KAAR,CAAc,yBAAd;AACAC,MAAAA,KAAK,CAAC,yEAAD,CAAL;AACD;;AACD,UAAMhB,IAAI,EAAV;AACD,GAzFkC,CA4F/B;;;AACA,iBAAe+B,IAAf,GAAsB;AAClB,QAAI5D,GAAG,KAAKH,SAAR,IAAqBK,OAAO,KAAKL,SAArC,EAAgD;AAC5CgD,MAAAA,KAAK,CAAC,wFAAD,CAAL;AACA,YAAM,qGAAN;AACH;;AACD,QAAIgB,OAAO,GAAG,MAAM/D,QAAQ,CAACgE,OAAT,CAAiBC,QAAjB,CAA0B7D,OAA1B,EAAmC8D,IAAnC,EAApB;;AAEE,QAAIH,OAAO,GAAE,CAAE,IAAf,EACF;AACEhB,MAAAA,KAAK,CAAC,8DAAD,CAAL;AACA,YAAM,8DAAN;AACD;;AAED,UAAM/C,QAAQ,CAACgE,OAAT,CAAiBG,IAAjB,CAAsBxE,QAAQ,CAAC,CAAD,CAA9B,EAAkCO,GAAlC,EAAsCE,OAAtC,EAA+CgE,IAA/C,CAAoD;AAACC,MAAAA,IAAI,EAAC1E,QAAQ,CAAC,CAAD,CAAd;AAAmB2E,MAAAA,GAAG,EAAE;AAAxB,KAApD,CAAN;AACC;;AAED,MAAG,OAAOzE,IAAP,KAAgB,WAAhB,IACG,OAAOF,QAAP,KAAoB,WADvB,IAEG,OAAOK,QAAP,KAAoB,WAF1B,EAEuC,CACtC,CAhH0B,CAkH3B;;;AACA,iBAAe0B,gBAAf,GAAkC;AAClC,QAAItB,OAAO,KAAKL,SAAhB,EACA;AACEgD,MAAAA,KAAK,CAAC,gDAAD,CAAL;AACA,YAAM,gDAAN;AACD;;AAED,QAAG;AACA,YAAMrC,GAAG,GAAG,MAAMV,QAAQ,CAACgE,OAAT,CAAiBC,QAAjB,CAA0B7D,OAA1B,EAAmC8D,IAAnC,EAAlB;AACDvD,MAAAA,MAAM,CAACD,GAAD,CAAN;AACAa,MAAAA,OAAO,CAACC,GAAR,CAAY+C,IAAI,CAACC,SAAL,CAAe9D,GAAf,CAAZ;AACA,YAAMM,KAAK,GAAG,MAAMhB,QAAQ,CAACgE,OAAT,CAAiBS,OAAjB,CAAyBrE,OAAzB,EAAkC8D,IAAlC,EAApB;AACAjD,MAAAA,QAAQ,CAACD,KAAD,CAAR;AACAT,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD,KAPD,CAQA,OAAMuC,KAAN,EACA;AACAjC,MAAAA,cAAc,CAAC,6BAAD,CAAd;AACAN,MAAAA,cAAc,CAAC,KAAD,CAAd;AACC;AACF;;AAIG,QAAMmE,oBAAoB,GAAIrD,GAAD,IAAS;AACpCA,IAAAA,GAAG,CAACC,cAAJ;AACAyB,IAAAA,KAAK,CAAE,kBAAiBvC,QAAS,EAA5B,CAAL;AACAC,IAAAA,WAAW,CAACD,QAAD,CAAX;AACD,GAJD;;AAKA,QAAMmE,oBAAoB,GAAI/C,CAAD,IAAO;AACpCnB,IAAAA,WAAW,CAACmB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX;AACC,GAFD;;AAIA,iBAAe8C,aAAf,GACA;AACErD,IAAAA,OAAO,CAACC,GAAR,CAAYhB,QAAZ;AACAe,IAAAA,OAAO,CAACC,GAAR,CAAYpB,OAAZ;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAY7B,QAAQ,CAAC,CAAD,CAApB;;AACA,QAAI;AAACa,MAAAA;AAAD,SAAc,IAAd,IAAsB;AAACJ,MAAAA;AAAD,SAAa,IAAnC,IAA2CT,QAAQ,CAAC,CAAD,CAAR,IAAe,IAA9D,EACA;AACEoD,MAAAA,KAAK,CAAC,6HAAD,CAAL;AACA,YAAM,6HAAN;AACD;;AAED,QACA;AACA,YAAM/C,QAAQ,CAACgE,OAAT,CAAiBa,YAAjB,CAA8BlF,QAAQ,CAAC,CAAD,CAAtC,EAA0Ca,QAA1C,EAAmDJ,OAAnD,EAA4DgE,IAA5D,CAAiE;AAACC,QAAAA,IAAI,EAAC1E,QAAQ,CAAC,CAAD,CAAd;AAAmB2E,QAAAA,GAAG,EAAE;AAAxB,OAAjE,CAAN;AACA/C,MAAAA,OAAO,CAACC,GAAR,CAAYhB,QAAZ;AACAW,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACC,KALD,CAMA,OAAM2B,KAAN,EACA;AACEC,MAAAA,KAAK,CAAC,qHAAD,CAAL;AACD;AACF;;AACb,sBACE;AAAA,4BACE;AAAK,MAAA,SAAS,EAAIvD,MAAM,CAACsF,gBAAzB;AAAA,6BACA;AAAK,QAAA,SAAS,EAAItF,MAAM,CAACuF,gBAAzB;AAAA,gCACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAIC;AAAA,iCACG;AAAQ,YAAA,OAAO,EAAE,MAAM/B,2BAA2B,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,gBAJD,EAOGlC,gBAAgB,gBACjB;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,4BAAMnB,QAAQ,CAAC,CAAD,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADiB,gBAIN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXb;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YADF,eAiBE;AAAK,MAAA,SAAS,EAAIH,MAAM,CAACsF,gBAAzB;AAAA,6BACA;AAAK,QAAA,SAAS,EAAItF,MAAM,CAACuF,gBAAzB;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAM,UAAA,QAAQ,EAAG3D,YAAjB;AAAA,kCACA;AACA,YAAA,IAAI,EAAC,QADL;AAEA,YAAA,KAAK,EAAEhB,OAFP;AAGA,YAAA,QAAQ,EAAGuB;AAHX;AAAA;AAAA;AAAA;AAAA,kBADA,eAMA;AAAO,YAAA,IAAI,EAAC,QAAZ;AAAqB,YAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,kBANA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAWA;AAAK,UAAA,SAAS,EAAEnC,MAAM,CAACwF,MAAvB;AAAA,oBAEG1E,WAAW,gBACV;AAAA,oCACF;AAAA,sCACE;AAAA,qCAAWF,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,oBAC4B;AAAA,2BAAKM,GAAL;AAAA;AAAA;AAAA;AAAA;AAAA,sBAD5B;AAAA;AAAA;AAAA;AAAA;AAAA,oBADE,eAIF;AAAA,sCACA;AAAA,8CAAoBN,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,oBACmC;AAAA,0BAAKY;AAAL;AAAA;AAAA;AAAA;AAAA,sBADnC;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJE;AAAA;AAAA;AAAA;AAAA;AAAA,kBADU,gBAUV;AAAA,mCACA;AAAA,wBAAKJ;AAAL;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAZJ;AAAA;AAAA;AAAA;AAAA,gBAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAjBF,eAiDI;AAAK,MAAA,SAAS,EAAIpB,MAAM,CAACsF,gBAAzB;AAAA,6BACA;AAAK,QAAA,SAAS,EAAItF,MAAM,CAACuF,gBAAzB;AAAA,gCAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAQ,UAAA,OAAO,EAAI,MAAMjB,IAAI,EAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAjDJ,eAyDI;AAAK,MAAA,SAAS,EAAItE,MAAM,CAACsF,gBAAzB;AAAA,6BACA;AAAK,QAAA,SAAS,EAAItF,MAAM,CAACuF,gBAAzB;AAAA,gCACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA;AAAM,UAAA,QAAQ,EAAGL,oBAAjB;AAAA,kCACA;AACA,YAAA,IAAI,EAAC,MADL;AAEA,YAAA,KAAK,EAAElE,QAFP;AAGA,YAAA,QAAQ,EAAGmE;AAHX;AAAA;AAAA;AAAA;AAAA,kBADA,eAMA;AAAO,YAAA,IAAI,EAAC,QAAZ;AAAqB,YAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,kBANA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA,EAUDzD,iBAAiB,gBAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADgB,gBAEb;AAAA;AAAA;AAAA;AAAA,gBAZH,eAaF;AAAQ,UAAA,OAAO,EAAE0D,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbE;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAzDJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA8ED;;GAxPUnF,mB;;KAAAA,mB;AAyPX,eAAeA,mBAAf","sourcesContent":["import React, {useState} from 'react';\nimport MusicOwnership from '../artifacts/MusicOwnership.json';\nimport Web3 from 'web3';\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport styles from './CSS Modules/FileInputButtons-style.module.css';\n\n  function ContractInteraction (props) {\n\n    ///////Webpage State components///////\n    const [accounts, setAccounts] = useState([]); //state variable for accounts\n    const [web3, setWeb3] = useState (undefined); //web3 state\n    const [contract, setContract] = useState (undefined); //contract state\n    const [uri, setUri] = useState (undefined); //Uri code State\n    const [tokenID, setTokenID] = useState (undefined); //Token ID state\n    const [tokenExists, setTokenExists] = useState (false); //Triggers Token UI response on and off\n    const [reciever,setReciever ] = useState (undefined);\n    const [url, setUrl] = useState (undefined); //Metadata URL state\n    const [doesntExist, setDoesntExist] = useState(undefined); //switch for Token ID response\n    const [connectionStatus, setConnectionStatus] = useState(false);\n    const [owner, setOwner] = useState(undefined);\n    const [transactionStatus,setTransactionStatus] = useState(false);\n\n    ///////Function for submitting a token Id////////\n    const handleSubmit = (evt) => {\n      evt.preventDefault();\n      console.log(props.showCIDs);\n      console.log(tokenID);\n      RetrieveTokenURL(tokenID);\n    }\n    const handleChange = (e) => {\n    setTokenID(e.target.value)\n    }\n    \n    //Initialise state variables and connect to Smart Contract//\n    async function init() {\n             \n      try {\n          const uri = await (props.CIDkey); \n          const tokenID = await (props.tokenIDs);   \n          const  web3 = await new Web3(window.ethereum);\n          const accounts = await  web3.eth.getAccounts();\n          const networkId = await web3.eth.net.getId();\n          const deployedNetwork = MusicOwnership.networks[networkId];\n          const contract = await new web3.eth.Contract(\n          MusicOwnership.abi,\n          deployedNetwork && deployedNetwork.address\n          );\n          console.log(contract)\n          await setUri(uri);\n          await setWeb3(web3);\n          await setAccounts(accounts);\n          await setContract(contract);\n          console.log(tokenID);\n          console.log(uri);\n          }\n\n      catch (error) {\n        alert(`Failed to load web3, accounts or contract from the abi. Check console For details.`);\n        console.error(error);\n      }\n    }\n    \n    ///////Configure wallet and connect to Metamask///////\n\n    async function configureAndConnectMetamask() {\n      const provider = await detectEthereumProvider({\n        mustBeMetaMask: true\n      })\n      if (provider) {\n        try {\n          await provider.request({ method: 'eth_requestAccounts'})\n          await provider.request({\n            method: 'wallet_addEthereumChain',\n            params: [{\n              chainId: '0x3', \n              chainName: 'Ropsten',\n              nativeCurrency: {\n                name: 'ETH',\n                symbol: 'ETH',\n                decimals: 18\n               },\n              rpcUrls: ['https://ropsten.infura.io/v3/b3b18fff97b6463ca552f9334d7fe15f'],\n              blockExplorerUrls: ['https://ropsten.etherscan.io']\n            }]\n          }\n          )\n        } catch(e) {\n          console.error(e);\n          setConnectionStatus(true);\n        }  \n      } else {\n        console.error('Please install MetaMask');\n        alert('Please install the MetaMask wallet extension in Chrome or Brave Browser');\n      }\n      await init();\n    }\n\n \n        ////////////Mint a new Token////////////\n        async function Mint() {\n            if (uri === undefined || tokenID === undefined) {\n                alert('please ensure a file first and that you have entered a numerical Identification number');\n                throw('please ensure a file is submitted first and that you have entered a numerical Identification number');\n            }\n            let checkID = await contract.methods.tokenURI(tokenID).call();\n\n              if (checkID =! null)\n            {\n              alert('This ID number has been taken, please try a different number');\n              throw('This ID number has been taken, please try a different number');\n            }\n           \n            await contract.methods.mint(accounts[0],uri,tokenID).send({from:accounts[0], gas: 1000000});\n            }\n    \n            if(typeof web3 !== 'undefined'\n               && typeof accounts !== 'undefined'\n               && typeof contract !== 'undefined') {\n            }\n\n            /////////Retrieve a Token's Metadata and source File/////////\n            async function RetrieveTokenURL() {\n            if (tokenID === undefined)\n            {\n              alert('please enter a numerical Identification number');\n              throw('please enter a numerical Identification number');\n            }\n            \n            try{\n               const url = await contract.methods.tokenURI(tokenID).call();\n              setUrl(url);\n              console.log(JSON.stringify(url));\n              const owner = await contract.methods.ownerOf(tokenID).call();\n              setOwner(owner);\n              setTokenExists(true);\n            }\n            catch(error)\n            {\n            setDoesntExist('This Token ID does not exit');\n            setTokenExists(false);\n            }\n          }\n\n            \n              \n              const handleRecieverSubmit = (evt) => {\n                evt.preventDefault();\n                alert(`Submitting ID: ${reciever}`)\n                setReciever(reciever);\n              }\n              const handleRecieverChange = (e) => {\n              setReciever(e.target.value)\n              }\n              \n              async function TransferToken()\n              {\n                console.log(reciever);\n                console.log(tokenID);\n                console.log(accounts[0]);\n                if ({reciever} == null || {tokenID} == null || accounts[0] == null)\n                {\n                  alert('Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted')\n                  throw('Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted')\n                }\n\n                try\n                {\n                await contract.methods.transferFrom(accounts[0],reciever,tokenID).send({from:accounts[0], gas: 1000000});\n                console.log(reciever)\n                setTransactionStatus(true);\n                }\n                catch(error)\n                {\n                  alert('Transaction failed. \\nPlease ensure the token you wish to transfer exists and that you`re wallet contains the token');\n                }\n              }\n  return (\n    <div>\n      <div className = {styles.componentheaders}> \n      <div className = {styles.componentspacing}>\n      <h2>\n        3. Connect To Your Wallet\n      </h2>\n       <div> \n          <button onClick={() => configureAndConnectMetamask() }>Connect to Ropsten </button>\n        </div>\n        {connectionStatus ? (\n        <div> \n          <h3>Account:</h3>\n          <h5> {accounts[0]}</h5>\n        </div>) : (<h4>NotConnected</h4>)}\n          </div>\n          </div>\n     \n      <div className = {styles.componentheaders}> \n      <div className = {styles.componentspacing}>\n        <h2>4. Enter a TokenID</h2>\n        <form onSubmit= {handleSubmit}>\n        <input\n        type=\"number\"\n        value={tokenID}\n        onChange= {handleChange}\n        />\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n\n      <div className={styles.column}>\n       \n        {tokenExists ? (\n          <div>\n        <p> \n          <h3>Track {tokenID}:</h3> <h5>{url} </h5>\n        </p>\n        <p> \n        <h4>Owner of Track {tokenID}:</h4> <h5>{owner}</h5>\n        </p>\n        </div>\n        ) : (\n          <p>\n          <h4>{doesntExist}</h4>\n        </p>\n        )}\n        </div>\n        </div>\n        </div>\n\n        <div className = {styles.componentheaders}> \n        <div className = {styles.componentspacing}>\n\n          <h2> 5. Mint Your Token</h2>\n          <button onClick = {() => Mint()}> Mint Token </button>\n        </div>\n        </div>\n\n        <div className = {styles.componentheaders}> \n        <div className = {styles.componentspacing}>\n        <h2>Transfer Ownership</h2>\n        <form onSubmit= {handleRecieverSubmit}> \n        <input\n        type=\"text\"\n        value={reciever}\n        onChange= {handleRecieverChange}\n        />\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n      {transactionStatus ? (\n        <h4>Transaction Was Succesfull</h4>\n      ) : (<p></p>)}\n      <button onClick={TransferToken}>Transfer Token</button>\n      </div>\n      </div>\n      </div>\n     \n  );\n}\nexport default ContractInteraction"]},"metadata":{},"sourceType":"module"}