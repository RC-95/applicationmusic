{"ast":null,"code":"var _jsxFileName = \"/Users/rhysconnolly/SKEEEEET/client/src/components/ContractInteraction.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport MusicOwnership from '../artifacts/MusicOwnership.json';\nimport Web3 from 'web3';\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport styles from './CSS Modules/FileInputButtons-style.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ContractInteraction(props) {\n  _s();\n\n  ///////Webpage State components///////\n  const [accounts, setAccounts] = useState([]); //state variable for accounts\n\n  const [web3, setWeb3] = useState(undefined); //web3 state\n\n  const [contract, setContract] = useState(undefined); //contract state\n\n  const [uri, setUri] = useState(undefined); //Uri code State\n\n  const [tokenID, setTokenID] = useState(undefined); //Token ID state\n\n  const [tokenExists, setTokenExists] = useState(false); //Triggers Token UI response on and off\n\n  const [reciever, setReciever] = useState(undefined);\n  const [url, setUrl] = useState(undefined); //Metadata URL state\n\n  const [doesntExist, setDoesntExist] = useState(undefined); //switch for Token ID response\n\n  const [connectionStatus, setConnectionStatus] = useState(false);\n  const [owner, setOwner] = useState(undefined);\n  const [transactionStatus, setTransactionStatus] = useState(false); //Initialise state variables and connect to Smart Contract//\n\n  async function init() {\n    try {\n      const uri = await props.CIDkey;\n      const tokenID = await props.tokenIDs;\n      const web3 = await new Web3(window.ethereum);\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = MusicOwnership.networks[networkId];\n      const contract = await new web3.eth.Contract(MusicOwnership.abi, deployedNetwork && deployedNetwork.address);\n      await setUri(uri);\n      await setWeb3(web3);\n      await setAccounts(accounts);\n      await setContract(contract);\n    } catch (error) {\n      alert(`Failed to load web3, accounts or contract from the abi. Check console For details.`);\n      console.error(error);\n    }\n  } ///////Configure wallet and connect to Metamask///////\n\n\n  async function configureAndConnectMetamask() {\n    const provider = await detectEthereumProvider({\n      mustBeMetaMask: true\n    });\n\n    if (provider) {\n      try {\n        await provider.request({\n          method: 'eth_requestAccounts'\n        });\n        await provider.request({\n          method: 'wallet_addEthereumChain',\n          params: [{\n            chainId: '0x3',\n            chainName: 'Ropsten',\n            nativeCurrency: {\n              name: 'ETH',\n              symbol: 'ETH',\n              decimals: 18\n            },\n            rpcUrls: ['https://ropsten.infura.io/v3/b3b18fff97b6463ca552f9334d7fe15f'],\n            blockExplorerUrls: ['https://ropsten.etherscan.io']\n          }]\n        });\n      } catch (e) {\n        console.error(e);\n        setConnectionStatus(true);\n      }\n    } else {\n      console.error('Please install MetaMask');\n      alert('Please install the MetaMask wallet extension in Chrome or Brave Browser');\n    }\n\n    await init();\n  } ///////Function for submitting a token Id////////\n\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n    console.log(props.showCIDs);\n    console.log(tokenID);\n    RetrieveTokenURL(tokenID);\n  };\n\n  const handleChange = e => {\n    setTokenID(e.target.value);\n  }; ////////////Mint a new Token////////////\n\n\n  async function Mint() {\n    if (uri === undefined || tokenID === undefined) {\n      alert('please ensure a file first and that you have entered a numerical Identification number');\n      throw 'please ensure a file is submitted first and that you have entered a numerical Identification number';\n    }\n\n    let checkID = await contract.methods.tokenURI(tokenID).call();\n\n    if (checkID = !null) {\n      alert('This ID number has been taken, please try a different number');\n      throw 'This ID number has been taken, please try a different number';\n    }\n\n    await contract.methods.mint(accounts[0], uri, tokenID).send({\n      from: accounts[0],\n      gas: 1000000\n    });\n  } ///User inut for TokenID request///\n\n\n  const handleRecieverSubmit = evt => {\n    evt.preventDefault();\n    alert(`Submitting ID: ${reciever}`);\n    setReciever(reciever);\n  };\n\n  const handleRecieverChange = e => {\n    setReciever(e.target.value);\n  }; /////////Retrieve a Token's Metadata and source File/////////\n\n\n  async function RetrieveTokenURL() {\n    if (tokenID === undefined) {\n      alert('please enter a numerical Identification number');\n      throw 'please enter a numerical Identification number';\n    }\n\n    try {\n      const url = await contract.methods.tokenURI(tokenID).call();\n      setUrl(url);\n      console.log(JSON.stringify(url));\n      const owner = await contract.methods.ownerOf(tokenID).call();\n      setOwner(owner);\n      setTokenExists(true);\n    } catch (error) {\n      setDoesntExist('This Token ID does not exist and is available to be used');\n      setTokenExists(false);\n    }\n  }\n\n  async function TransferToken() {\n    console.log(reciever);\n    console.log(tokenID);\n    console.log(accounts[0]);\n\n    if ({\n      reciever\n    } == null || {\n      tokenID\n    } == null || accounts[0] == null) {\n      alert('Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted');\n      throw 'Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted';\n    }\n\n    try {\n      await contract.methods.transferFrom(accounts[0], reciever, tokenID).send({\n        from: accounts[0],\n        gas: 1000000\n      });\n      console.log(reciever);\n      setTransactionStatus(true);\n    } catch (error) {\n      alert('Transaction failed. \\nPlease ensure the token you wish to transfer exists and that you`re wallet contains the token');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"3. Connect To Your Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => configureAndConnectMetamask(),\n            children: \"Connect to Ropsten \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), connectionStatus ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Account:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\" \", accounts[0]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"NotConnected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"4. Enter a TokenID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: tokenID,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.column,\n          children: tokenExists ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"Track \", tokenID, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: [url, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 43\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Owner of Track \", tokenID, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: owner\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 50\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: doesntExist\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \" 5. Mint Your Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => Mint(),\n          children: \" Mint Token \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.componentheaders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.componentspacing,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Transfer Ownership\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleRecieverSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: reciever,\n            onChange: handleRecieverChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 9\n        }, this), transactionStatus ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Transaction Was Succesfull\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: TransferToken,\n          children: \"Transfer Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContractInteraction, \"SrFiNnAl/MNXPtHI6amld/LWQsI=\");\n\n_c = ContractInteraction;\nexport default ContractInteraction;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContractInteraction\");","map":{"version":3,"sources":["/Users/rhysconnolly/SKEEEEET/client/src/components/ContractInteraction.js"],"names":["React","useState","MusicOwnership","Web3","detectEthereumProvider","styles","ContractInteraction","props","accounts","setAccounts","web3","setWeb3","undefined","contract","setContract","uri","setUri","tokenID","setTokenID","tokenExists","setTokenExists","reciever","setReciever","url","setUrl","doesntExist","setDoesntExist","connectionStatus","setConnectionStatus","owner","setOwner","transactionStatus","setTransactionStatus","init","CIDkey","tokenIDs","window","ethereum","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","Contract","abi","address","error","alert","console","configureAndConnectMetamask","provider","mustBeMetaMask","request","method","params","chainId","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","e","handleSubmit","evt","preventDefault","log","showCIDs","RetrieveTokenURL","handleChange","target","value","Mint","checkID","methods","tokenURI","call","mint","send","from","gas","handleRecieverSubmit","handleRecieverChange","JSON","stringify","ownerOf","TransferToken","transferFrom","componentheaders","componentspacing","column"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport MusicOwnership from '../artifacts/MusicOwnership.json';\nimport Web3 from 'web3';\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport styles from './CSS Modules/FileInputButtons-style.module.css';\n\nfunction ContractInteraction (props) {\n\n  ///////Webpage State components///////\n  const [accounts, setAccounts] = useState([]); //state variable for accounts\n  const [web3, setWeb3] = useState (undefined); //web3 state\n  const [contract, setContract] = useState (undefined); //contract state\n  const [uri, setUri] = useState (undefined); //Uri code State\n  const [tokenID, setTokenID] = useState (undefined); //Token ID state\n  const [tokenExists, setTokenExists] = useState (false); //Triggers Token UI response on and off\n  const [reciever,setReciever ] = useState (undefined);\n  const [url, setUrl] = useState (undefined); //Metadata URL state\n  const [doesntExist, setDoesntExist] = useState(undefined); //switch for Token ID response\n  const [connectionStatus, setConnectionStatus] = useState(false);\n  const [owner, setOwner] = useState(undefined);\n  const [transactionStatus,setTransactionStatus] = useState(false);\n\n  \n    \n  //Initialise state variables and connect to Smart Contract//\n  async function init() {\n             \n    try {\n      const uri = await (props.CIDkey); \n      const tokenID = await (props.tokenIDs);   \n      const  web3 = await new Web3(window.ethereum);\n      const accounts = await  web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = MusicOwnership.networks[networkId];\n      const contract = await new web3.eth.Contract(\n      MusicOwnership.abi,\n      deployedNetwork && deployedNetwork.address\n      );\n      await setUri(uri);\n      await setWeb3(web3);\n      await setAccounts(accounts);\n      await setContract(contract);\n      }\n\n    catch (error) {\n      alert(`Failed to load web3, accounts or contract from the abi. Check console For details.`);\n      console.error(error);\n    }\n  }\n    \n  ///////Configure wallet and connect to Metamask///////\n\n  async function configureAndConnectMetamask() {\n    const provider = await detectEthereumProvider({\n      mustBeMetaMask: true\n      })\n    if (provider) {\n      try {\n        await provider.request({ method: 'eth_requestAccounts'})\n        await provider.request({\n          method: 'wallet_addEthereumChain',\n          params: [{\n            chainId: '0x3', \n            chainName: 'Ropsten',\n            nativeCurrency: {\n              name: 'ETH',\n              symbol: 'ETH',\n              decimals: 18\n              },\n            rpcUrls: ['https://ropsten.infura.io/v3/b3b18fff97b6463ca552f9334d7fe15f'],\n            blockExplorerUrls: ['https://ropsten.etherscan.io']\n            }]\n          })\n        } \n      catch(e) {\n        console.error(e);\n        setConnectionStatus(true);\n        }  \n      } \n    else {\n      console.error('Please install MetaMask');\n      alert('Please install the MetaMask wallet extension in Chrome or Brave Browser');\n    }\n    await init();\n  }\n\n  ///////Function for submitting a token Id////////\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    console.log(props.showCIDs);\n    console.log(tokenID);\n    RetrieveTokenURL(tokenID);\n    }\n      \n  const handleChange = (e) => {\n  setTokenID(e.target.value)\n  }\n\n\n  ////////////Mint a new Token////////////\n  async function Mint() {\n    if (uri === undefined || tokenID === undefined) {\n      alert('please ensure a file first and that you have entered a numerical Identification number');\n      throw('please ensure a file is submitted first and that you have entered a numerical Identification number');\n    }\n             \n    let checkID = await contract.methods.tokenURI(tokenID).call();\n\n    if (checkID =! null)\n      {\n        alert('This ID number has been taken, please try a different number');\n        throw('This ID number has been taken, please try a different number');\n      }\n          \n    await contract.methods.mint(accounts[0],uri,tokenID).send({from:accounts[0], gas: 1000000});\n  }\n\n  ///User inut for TokenID request///\n  const handleRecieverSubmit = (evt) => {\n    evt.preventDefault();\n    alert(`Submitting ID: ${reciever}`)\n    setReciever(reciever);\n    }\n  const handleRecieverChange = (e) => {\n  setReciever(e.target.value)\n  }\n\n  /////////Retrieve a Token's Metadata and source File/////////\n  async function RetrieveTokenURL() {\n    if (tokenID === undefined)\n      {\n        alert('please enter a numerical Identification number');\n        throw('please enter a numerical Identification number');\n      }\n            \n    try {\n      const url = await contract.methods.tokenURI(tokenID).call();\n      setUrl(url);\n      console.log(JSON.stringify(url));\n      const owner = await contract.methods.ownerOf(tokenID).call();\n      setOwner(owner);\n      setTokenExists(true);\n    }\n    catch(error){\n    setDoesntExist('This Token ID does not exist and is available to be used');\n    setTokenExists(false);\n    }\n  }\n\n              \n  async function TransferToken()  {\n    console.log(reciever);\n    console.log(tokenID);\n    console.log(accounts[0]);\n    if ({reciever} == null || {tokenID} == null || accounts[0] == null){\n      alert('Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted')\n      throw('Please ensure an address to send the token to has been submitted.\\nPlease also ensure a token identifier has been submitted')\n    }\n\n    try {\n      await contract.methods.transferFrom(accounts[0],reciever,tokenID).send({from:accounts[0], gas: 1000000});\n      console.log(reciever)\n      setTransactionStatus(true);\n      }\n    catch(error)  {\n      alert('Transaction failed. \\nPlease ensure the token you wish to transfer exists and that you`re wallet contains the token');\n    }\n  }\n\n  return (\n    <div>\n      <div className = {styles.componentheaders}> \n        <div className = {styles.componentspacing}>\n        <h2>3. Connect To Your Wallet</h2>\n          <div> \n          <button onClick={() => configureAndConnectMetamask() }>Connect to Ropsten </button>\n          </div>\n        {connectionStatus ? (\n        <div> \n          <h3>Account:</h3>\n          <h5> {accounts[0]}</h5>\n        </div>) : (<h4>NotConnected</h4>)}\n        </div>\n      </div>\n     \n      <div className = {styles.componentheaders}> \n        <div className = {styles.componentspacing}>\n          <h2>4. Enter a TokenID</h2>\n          <form onSubmit= {handleSubmit}>\n          <input type=\"number\" value={tokenID} onChange= {handleChange}/>\n          <input type=\"submit\" value=\"Submit\" />\n          </form>\n\n          <div className={styles.column}>\n       \n          {tokenExists ? (\n            <div>\n              <div>\n                <h3>Track {tokenID}:</h3> <h5>{url} </h5>\n              </div>\n              <h4>Owner of Track {tokenID}:</h4> <h5>{owner}</h5>\n        \n            </div>\n            ) : (\n            <h4>{doesntExist}</h4>\n            )}\n          </div>\n        </div>\n      </div>\n\n        <div className = {styles.componentheaders}> \n        <div className = {styles.componentspacing}>\n\n          <h2> 5. Mint Your Token</h2>\n          <button onClick = {() => Mint()}> Mint Token </button>\n        </div>\n        </div>\n\n        <div className = {styles.componentheaders}> \n        <div className = {styles.componentspacing}>\n        <h2>Transfer Ownership</h2>\n        <form onSubmit= {handleRecieverSubmit}> \n        <input\n        type=\"text\"\n        value={reciever}\n        onChange= {handleRecieverChange}\n        />\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n      {transactionStatus ? (\n        <h4>Transaction Was Succesfull</h4>\n      ) : (<p></p>)}\n      <button onClick={TransferToken}>Transfer Token</button>\n      </div>\n      </div>\n      </div>\n     \n  );\n}\nexport default ContractInteraction"]},"metadata":{},"sourceType":"module"}