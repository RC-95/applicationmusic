{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rhysconnolly/Desktop/MusicOwnersipApplication/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rhysconnolly/Desktop/MusicOwnersipApplication/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rhysconnolly/Desktop/MusicOwnersipApplication/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import styles from'./CSS Modules/FileInputButtons-style.module.css';///////Global Variables//////\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PROJECT_ID='1z2zKzXJSnmfHxjLo8APH4Ljxhl';var PROJECT_SECRET='796b649fad2aac594c4767a8abcd7be4';var Cid='';function UploadFile(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFilePicked=_useState4[0],setIsFilePicked=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmitted=_useState6[0],setSubmission=_useState6[1];var changeHandler=function changeHandler(event){setSelectedFile(event.target.files[0]);setIsFilePicked(true);};function handleSubmission(){return _handleSubmission.apply(this,arguments);}function _handleSubmission(){_handleSubmission=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData,xhr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();_context.next=3;return formData.append('Submitted File',selectedFile);case 3:console.log(formData);xhr=new XMLHttpRequest();_context.next=7;return xhr.open(\"POST\",\"https://ipfs.infura.io:5001/api/v0/add\");case 7:_context.next=9;return xhr.setRequestHeader(\"Authorization\",\"Basic\"+btoa(PROJECT_ID+\":\"+PROJECT_SECRET));case 9:_context.next=11;return xhr.send(formData);case 11:xhr.onload=function(){Cid=JSON.parse(\"\".concat(xhr.response));setSelectedFile(Cid.Hash);if(Cid.Hash=!null){setSubmission(true);}};case 12:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmission.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:styles.componentheaders,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.componentspacing,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"1. Upload An Audio Track:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".mp3,.wav,.aiff,.FLAC\",name:\"file\",onChange:changeHandler,className:styles.customfileinput}),isFilePicked?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h5\",{className:styles.FileinputText,children:[\" File Name: \",selectedFile.name,\" \"]})}):/*#__PURE__*/_jsx(\"p\",{className:styles.uploadFile}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:styles.SubmitButton,onClick:handleSubmission,children:\" Submit File\"}),isSubmitted?/*#__PURE__*/_jsxs(\"div\",{className:styles.URLallignment,children:[/*#__PURE__*/_jsxs(\"h5\",{className:styles.URLallignment,children:[\"Address: \",'https://ipfs.io/ipfs/'+selectedFile,\" \"]}),/*#__PURE__*/_jsx(\"h5\",{className:styles.FileinputText,children:\"SUCCESFULLY UPLOADED\"})]}):/*#__PURE__*/_jsx(\"p\",{className:styles.uploadFile})]})]})});}export default UploadFile;","map":{"version":3,"sources":["/Users/rhysconnolly/Desktop/MusicOwnersipApplication/client/src/components/UploadFile.js"],"names":["React","useState","styles","PROJECT_ID","PROJECT_SECRET","Cid","UploadFile","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","isSubmitted","setSubmission","changeHandler","event","target","files","handleSubmission","formData","FormData","append","console","log","xhr","XMLHttpRequest","open","setRequestHeader","btoa","send","onload","JSON","parse","response","Hash","componentheaders","componentspacing","customfileinput","FileinputText","name","uploadFile","SubmitButton","URLallignment"],"mappings":"uaAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,iDAAnB,CAEA;wFACA,GAAMC,CAAAA,UAAU,CAAG,6BAAnB,CACA,GAAMC,CAAAA,cAAc,CAAG,kCAAvB,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CAGA,QAASC,CAAAA,UAAT,EACA,CACE,cAAwCL,QAAQ,EAAhD,wCAAOM,YAAP,eAAqBC,eAArB,eACA,eAAwCP,QAAQ,CAAC,KAAD,CAAhD,yCAAOQ,YAAP,eAAqBC,eAArB,eACA,eAAqCT,QAAQ,CAAC,KAAD,CAA7C,yCAAOU,WAAP,eAAoBC,aAApB,eAEC,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAClCN,eAAe,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAf,CACEN,eAAe,CAAC,IAAD,CAAf,CACD,CAHA,CALH,QAUiBO,CAAAA,gBAVjB,0JAUE,oJACKC,QADL,CACgB,GAAIC,CAAAA,QAAJ,EADhB,uBAEKD,CAAAA,QAAQ,CAACE,MAAT,CAAgB,gBAAhB,CAAkCb,YAAlC,CAFL,QAGAc,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EAEMK,GALN,CAKa,GAAIC,CAAAA,cAAJ,EALb,uBAMMD,CAAAA,GAAG,CAACE,IAAJ,CACJ,MADI,CAEJ,wCAFI,CANN,8BAWMF,CAAAA,GAAG,CAACG,gBAAJ,CACJ,eADI,CAEJ,QAAUC,IAAI,CAACxB,UAAU,CAAG,GAAb,CAAmBC,cAApB,CAFV,CAXN,+BAgBMmB,CAAAA,GAAG,CAACK,IAAJ,CAASV,QAAT,CAhBN,SAkBCK,GAAG,CAACM,MAAJ,CAAa,UAAM,CAClBxB,GAAG,CAAGyB,IAAI,CAACC,KAAL,WAAcR,GAAG,CAACS,QAAlB,EAAN,CACAxB,eAAe,CAACH,GAAG,CAAC4B,IAAL,CAAf,CACA,GAAI5B,GAAG,CAAC4B,IAAJ,CAAU,CAAE,IAAhB,CACE,CACErB,aAAa,CAAC,IAAD,CAAb,CACD,CACF,CAPF,CAlBD,uDAVF,mDAwCE,mBACA,YAAK,SAAS,CAAIV,MAAM,CAACgC,gBAAzB,uBACE,aAAK,SAAS,CAAIhC,MAAM,CAACiC,gBAAzB,wBACE,iDADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,MAAM,CAAC,uBAA1B,CAAkD,IAAI,CAAC,MAAvD,CAA8D,QAAQ,CAAEtB,aAAxE,CAAuF,SAAS,CAAEX,MAAM,CAACkC,eAAzG,EAFF,CAGG3B,YAAY,cACX,kCACF,YAAI,SAAS,CAAEP,MAAM,CAACmC,aAAtB,0BAAkD9B,YAAY,CAAC+B,IAA/D,OADE,EADW,cAKb,UAAG,SAAS,CAAEpC,MAAM,CAACqC,UAArB,EARF,cAQyC,aARzC,cASI,oCACE,eAAQ,SAAS,CAAErC,MAAM,CAACsC,YAA1B,CAAwC,OAAO,CAAEvB,gBAAjD,0BADF,CAEGN,WAAW,cACT,aAAK,SAAS,CAAET,MAAM,CAACuC,aAAvB,wBACC,YAAI,SAAS,CAAEvC,MAAM,CAACuC,aAAtB,uBAA+C,wBAA0BlC,YAAzE,OADD,cAEC,WAAI,SAAS,CAAEL,MAAM,CAACmC,aAAtB,kCAFD,GADS,cAMV,UAAG,SAAS,CAAEnC,MAAM,CAACqC,UAArB,EARJ,GATJ,GADF,EADA,CA0BD,CACD,cAAejC,CAAAA,UAAf","sourcesContent":["import React, {useState} from 'react'\nimport styles from './CSS Modules/FileInputButtons-style.module.css';\n\n///////Global Variables//////\nconst PROJECT_ID = '1z2zKzXJSnmfHxjLo8APH4Ljxhl';\nconst PROJECT_SECRET = '796b649fad2aac594c4767a8abcd7be4';\nvar Cid = '';\n\n\nfunction UploadFile() \n{\n  const [selectedFile, setSelectedFile] = useState();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n  const [isSubmitted, setSubmission] = useState(false);\n\n   const changeHandler = (event) => {\n\t setSelectedFile(event.target.files[0]);\n    setIsFilePicked(true);\n  };\n     \n  async function handleSubmission() {\n\tconst formData = new FormData();\n\tawait formData.append('Submitted File', selectedFile);\n  console.log(formData);\n  \n  const xhr =  new XMLHttpRequest();\n  await xhr.open(\n    \"POST\",\n    \"https://ipfs.infura.io:5001/api/v0/add\"\n  );\n\n  await xhr.setRequestHeader(\n    \"Authorization\", \n    \"Basic\" + btoa(PROJECT_ID + \":\" + PROJECT_SECRET)\n  );\n\n  await xhr.send(formData); \n  \n   xhr.onload = () => {\n    Cid = JSON.parse(`${xhr.response}`);\n    setSelectedFile(Cid.Hash);\n    if (Cid.Hash =! null)\n      {\n        setSubmission(true);\n      }\n    }  \n  }\n\n    \n\n  return (\n  <div className = {styles.componentheaders}>\n    <div className = {styles.componentspacing}>\n      <h2>1. Upload An Audio Track:</h2>\n      <input type=\"file\" accept=\".mp3,.wav,.aiff,.FLAC\" name=\"file\" onChange={changeHandler} className={styles.customfileinput}/>\n      {isFilePicked ? (\n        <div>\n\t\t\t\t  <h5 className={styles.FileinputText}> File Name: {selectedFile.name} </h5>\n\t\t\t  </div>\n      ) : (\n      <p className={styles.uploadFile}></p>)}<br/>\n        <div>\n          <button className={styles.SubmitButton} onClick={handleSubmission} > Submit File</button> \n          {isSubmitted ? \n            (<div className={styles.URLallignment}>\n              <h5 className={styles.URLallignment}>Address: {'https://ipfs.io/ipfs/' + selectedFile} </h5>\n              <h5 className={styles.FileinputText}>SUCCESFULLY UPLOADED</h5>\n            </div> \n            ) : (\n            <p className={styles.uploadFile}></p>\n            ) \n          }\n        </div>\n    </div>\n  </div>\n);\n}\nexport default UploadFile"]},"metadata":{},"sourceType":"module"}